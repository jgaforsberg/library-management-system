-- url:  "jdbc:mysql://localhost:3306/javafxtest"
-- username: "your mysql username" (default is root)
-- password: "your mysql password" (default is 1234)

-- change url username and password in DBUtils.java if your db name, username and password differs from default
-- check data source configuration in intellij for troubleshooting
-- for mysql intellij setup tutorial, visit: https://www.youtube.com/watch?v=e8g9eNnFpHQ

-- mysql database scripts

create database javafxtest;

create table javafxtest.users 	(
								id INT NOT NULL AUTO_INCREMENT,
								username VARCHAR(50) NOT NULL UNIQUE,
                                password VARCHAR(50) NOT NULL,
                                firstname VARCHAR(50) NOT NULL,
                                lastname VARCHAR(50) NOT NULL,
                                usertype VARCHAR(20) NOT NULL,
                                PRIMARY KEY(id)
                                );

insert into javafxtest.users	(username, password, firstname, lastname, usertype
								)
VALUES
                                (
								'ltustudent1', 'abc', 'Lena', 'PH', 'student'
								);
ALTER TABLE `javafxtest`.`users`
CHANGE COLUMN `email` `email` VARCHAR(255) NULL COMMENT 'user email for user interaction - unique = one account per existing email' ;


CREATE TABLE `javafxtest`.`media` (
  `mediaid` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(245) NOT NULL,
  `format` VARCHAR(25) NOT NULL COMMENT 'Bok, Film, Journal',
  `category` VARCHAR(245) NOT NULL COMMENT 'cat1,cat2,cat3 etc. for keyword searches',
  `description` VARCHAR(245) NULL COMMENT 'included in keyword search',
  `publisher` VARCHAR(245) NULL,
  `edition` VARCHAR(25) NULL COMMENT 'e.g., journal = 04/2022, bok = 6e, film = director\'s cut',
  `author` VARCHAR(245) NULL COMMENT 'auth1,auth2,auth3 etc.',
  `isbn` VARCHAR(25) NULL,
  `director` VARCHAR(245) NULL COMMENT 'dir1,dir2,dir3, etc.',
  `actor` VARCHAR(245) NULL COMMENT 'act1,act2,act3 etc.',
  `country` VARCHAR(45) NULL,
  `rating` VARCHAR(5) NULL COMMENT 'in integers, e.g., 3, 13, 18',
  `available` VARCHAR(45) NOT NULL COMMENT 'ex:  referens, utlånad, reserverad, ledig',
  PRIMARY KEY (`mediaid`),
  UNIQUE INDEX `mediaid_UNIQUE` (`mediaid` ASC) VISIBLE)
COMMENT = 'table for storing all media';

-- database values can't be NULL for the SearchController class to function, empty strings like '' must be used

INSERT INTO `javafxtest`.`media`
(`title`, `format`, `category`, `description`,
`publisher`, `edition`, `author`, `isbn`,
`director`, `actor`, `country`, `rating`,
`available`)
VALUES
-- böcker
('Database Systems: A Practical Approach To Design, Implementation, And Management', 'bok', 'It,Databas,Kurslitteratur', 'D0004N, D0005N, This book is ideal for a one- or two-term course in database management or database design in an undergraduate or graduate level course.',
'Pearson', '6', 'Carolyn Begg,Thomas Connolly', '9781292061184',
'', '', '', '',
'Referens'),
('Database Systems: A Practical Approach To Design, Implementation, And Management', 'bok', 'It,Databas,Kurslitteratur', 'D0004N, D0005N, This book is ideal for a one- or two-term course in database management or database design in an undergraduate or graduate level course.',
'Pearson', '6', 'Carolyn Begg,Thomas Connolly', '9781292061184',
'', '', '', '',
'Ledig'),
('Java How to Program - Early Objects', 'bok', 'It,Java,Programmering,Kurslitteratur', 'D0019N, D0024E, Unparalleled breadth and depth of object-oriented programming concepts.',
'Pearson', '11', 'Paul Deitel,Harvey Deitel', '9781292223858',
'', '', '', '',
'Referens'),
('Java How to Program - Early Objects', 'bok', 'It,Java,Programmering,Kurslitteratur', 'D0019N, D0024E, Unparalleled breadth and depth of object-oriented programming concepts.',
'Pearson', '11', 'Paul Deitel,Harvey Deitel', '9781292223858',
'', '', '', '',
'Ledig'),
('Java How to Program - Early Objects', 'bok', 'It,Java,Programmering,Kurslitteratur', 'D0019N, D0024E, Unparalleled breadth and depth of object-oriented programming concepts.',
'Pearson', '11', 'Paul Deitel,Harvey Deitel', '9781292223858',
'', '', '', '',
'Ledig'),
('Praktisk Mjukvarutestning', 'bok', 'IT,Test,Mjukvarutest,Kurslitteratur', 'I0015N, I Praktisk mjukvarutestning behandlas ämnen som sammanhangets påverkan på test, testledning, att genomföra tester, testmiljöer, testdata, automatiserade tester.',
'Studentlitteratur', '1', 'Eva Holmquist', '9789144117775',
'', '', '', '',
'Referens'),
('Praktisk Mjukvarutestning', 'bok', 'IT,Test,Mjukvarutest,Kurslitteratur', 'I0015N, I Praktisk mjukvarutestning behandlas ämnen som sammanhangets påverkan på test, testledning, att genomföra tester, testmiljöer, testdata, automatiserade tester.',
'Studentlitteratur', '1', 'Eva Holmquist', '9789144117775',
'', '', '', '',
'Ledig'),
('Object-oriented system analysis and design', 'bok', 'IT,OOP,OOAD,Objekt Orienterad Analys och Design,UML,Kurslitteratur', 'D0006N, The book provides a clear, practical framework for development that uses all the major techniques from UML 2.2.',
'McGraw Hill', '4', 'Simon Bennett,Steve McRobb,Ray Farmer', '9780077125363',
'', '', '', '',
'Referens'),
('Object-oriented system analysis and design', 'bok', 'IT,OOP,OOAD,Objekt Orienterad Analys och Design,UML,Kurslitteratur', 'D0006N, The book provides a clear, practical framework for development that uses all the major techniques from UML 2.2.',
'McGraw Hill', '4', 'Simon Bennett,Steve McRobb,Ray Farmer', '9780077125363',
'', '', '', '',
'Ledig'),
('Matematiska utmaningar - En kurs i problemlösning', 'bok', 'Matematik,Problemlösning', 'Träning i matematisk problemlösning ger kunskap om tänkbara lösningsstrategier, systematiskt utnyttjande av ett analytisk tänkande, korrekt argumentation och motivering av varje steg i en slutledning.',
'Studentlitteratur', '2', 'Paul Vaderlind', '9780077125363',
'', '', '', '',
'Ledig'),
('Arbetsmiljöregler	för bygg- och anläggningsverksamhet', 'bok', 'Bygg,Arbetsmiljö,Anläggning,Förordningar', 'Alla som befinner sig på byggarbetsplatsen ska ha goda kunskaper i arbetsmiljö. Kunskaper om regler kring arbetsmiljö skyddar dig själv och dina medarbetare från skador och olyckor.',
'Sveriges Byggindustrier', '', 'Sveriges Byggindustrier', '',
'', '', '', '',
'Ledig'),
('Tillämpad Byggnadsfysik', 'bok', 'Fysik,Bygg,Anläggning,Byggnadskonstruktion', 'Boken behandlar tillämpningen av byggnadsfysikens värme, fukt och luft i husbyggnader, dess väggar, tak och grunder.',
'Studentlitteratur', '6', 'Bengt-Åke Petersson', '9789144123936',
'', '', '', '',
'Ledig'),
('UBUNTU-boken', 'bok', 'IT,Linux,Ubuntu,Programmering,Operativsystem', 'Är du nyfiken på Linux och Ubuntu? Då är det har rätt bok för dig. Här får du lära dig både grundläggande och avancerad användning av Ubuntu Linux.',
'HME publishing', '3', 'Jesper Nilsson', '9789197726016',
'', '', '', '',
'Ledig'),
('Cuba', 'bok', 'Resa,Kuba,Reseguide,Globetrotter,Världen', "Lonely Planet's Cuba is your passport to the most relevant, up-to-date advice on what to see and skip, and what hidden discoveries await you.",
'Lonely Planet', '8', 'Brendan Sainsbury, Luke Waterson', '9781743216781',
'', '', '', '',
'Ledig'),
('Musikboken', 'bok', 'Musik,Musikinstrument,Instrument', 'Musikboken',
'Akademiförlaget', '2', 'Lasse Carlsson, Hans Nordström', '9124165336',
'', '', '', '',
'Ledig'),
('Interaktionsdesign Bortom människa-dator-interaktion', 'bok', 'IT,UX,MDI,HMI,Agil', 'Översättare: Lena Svensson, Maria Drangel, Interaktionsdesign: bortom människa-dator-interaktion ger ett tvärvetenskapligt, praktiskt och processorienterat synsätt på människa-dator-interaktion.',
'Studentlitteratur', '1', 'Jennifer Preece, Yvonne Rogers, Helen Sharp', '9789144092072',
'', '', '', '',
'Referens'),
('Interaktionsdesign Bortom människa-dator-interaktion', 'bok', 'IT,UX,MDI,HMI,Agil', 'Översättare: Lena Svensson, Maria Drangel, Interaktionsdesign: bortom människa-dator-interaktion ger ett tvärvetenskapligt, praktiskt och processorienterat synsätt på människa-dator-interaktion.',
'Studentlitteratur', '1', 'Jennifer Preece, Yvonne Rogers, Helen Sharp', '9789144092072',
'', '', '', '',
'Ledig'),
('Minimikrav på elmaterial	i olika slags utrymmen enligt elinstallationsreglerna', 'bok', 'El,Arbetsmiljö,Förordningar,Installation', 'Elsäkerhetsverkets föreskrifter, Elektriska installatörsorganisationen.',
'Elförlaget', '2', 'Tord Martinsen', '9197514322',
'', '', '', '',
'Ledig'),
('Groundwork for a better Vocabulary', 'bok', 'Språk,Grammatik,Engelska,Glosor', 'Groundwork for a Better Vocabulary (3rd, 04) by Smith, Kent R [Paperback (2004)].',
'Townsend press', '3', 'Beth Johnson, Carole Mohr, Janet M. Goldstein', '1591940141',
'', '', '', '',
'Ledig'),
('The Bitter Harvest', 'bok', 'Historia,Memoar,Biografi,Afrika,Kolonialism,Självständighet', 'In this revealing and important historical document, Ian Smith charts the rise and fall of a one-great nation.',
'John Blake publishing Ltd', '', 'Ian Smith', '9781857826043',
'', '', '', '',
'Ledig'),
('Starting Strength	Basic Barbell training', 'bok', 'Hälsa,Träning,Fysionomi,Tyngdlyftning', 'Starting Strength has been called the best and most useful of fitness books.',
'The Aasgaard Company', '3', 'Mark Rippetoe', '9780982522738',
'', '', '', '',
'Ledig'),
('Java Network Programming 4ed: Developing Networked Applications', 'bok', 'IT,Java,Kurslitteratur,Programmering', 'The style of both Java and network programming have slowly changed over the past seven years, and the new edition of this popular book reflects that.',
"O'Reilly Media", '4', 'Elliotte Rusty Harold', '9781449357672',
'', '', '', '',
'Ledig'),
-- filmer
('The Running Man', 'film', 'Action,Science Fiction,Thriller', 'In the year 2019 an innocent man accused of a crime has a choice - Hard Time or Prime Time. Tim Zinneman,George Linder.',
'', '', '', '',
'Paul Michael Glaser', 'Arnold Schwarzenegger,Maria Conchita Alonso, Richard Dawson', 'USA', '18',
'Ledig'),
('Stallone Collection', 'film', 'Action,Science Fiction,Thriller', 'Cobra,Assassins,Tango and Cash,The Specialist,Demolition Man.',
'', '', '', '',
'George P. Cosmatos,Richard Donner,Andrey Konchalovskiy, Albert Magnoli,Luis Llosa,Marco Brambilla', 'Sylvester Stallone,Antonio Banderas,Julianne Moore,Kurt Russel,Sharon Stone,Wesley Snipes,Sandra Bullock,Benjamin Bratt', 'USA', '18',
'Ledig'),
('Ondskan', 'film', 'Drama,Thriller', 'Ondskan är en berättelse om våldet och om vägen ut ur våldsspiralen - men lika mycket om stark vänskap och spirande kärlek.',
'', '', '', '',
'Mikael Håfström', 'Andreas Wilson,Linda Zilliacus,Henrik Lundström,Gustaf Skarsgård,Jesper Salén,Marie Richardson,Johan Rabéus,Kjell Bergqvist,Magnus Roosman, Lennart Hjulström,Björn Granath', 'Sverige', '11',
'Ledig'),
('Master and Commander The Far Side of The World', 'film', 'Action,Drama,Historia', 'During the Napoleonic Wars, a brash British captain pushes his ship and crew to their limits in pursuit of a formidable French war vessel around South America.',
'', '', '', '',
'Peter Weir', 'Russel Crowe,Paul Bettany', 'USA', '11',
'Ledig'),
('Braveheart', 'film', 'Action,Historia,Drama', 'Scottish warrior William Wallace leads his countrymen in a rebellion to free his homeland from the tyranny of King Edward I of England.',
'', '', '', '',
'Mel Gibson', 'Mel Gibson,Sophie Marceuau,Patrick McGoohan,Catherine McCormack,Brendan Gleeson', 'USA', '15',
'Ledig'),
('The Matrix', 'film', 'Action,Science Fiction', 'When a beautiful stranger leads computer hacker Neo to a forbidding underworld, he discovers the shocking truth--the life he knows is the elaborate deception of an evil cyber-intelligence.',
'', '', '', '',
'Andy Wachowski,Larry Wachowski', 'Keanu Reeves,Lawrence Fishburne,Carrie Ann Moss,Joe Pantoliano,Hugo Weaving', 'USA', '18',
'Ledig'),
('The Die Hard Collection', 'film', 'Action,Thriller', 'Bruce Willis is John McClane. Die Hard,Die Hard 2, Die Hard With a Vengeance,Die Hard 4.0 Live Free or Die Hard,A Good Day to Die Hard.',
'', '', '', '',
'John McTiernan,Renny Harlin,Len Wiseman,Noam Murro', 'Bruce Willis,Alan Rickman,Bonnie Bedelia,William Sadler, John Amos,Samuel L. Jackson,Jeremy Irons,Graham Greene,Justin Long,Timothy Olyphant,Maggie Q,Jai Courtney,Sebastian Koch', 'USA', '15',
'Ledig'),
('Mad Max Collection', 'film', 'Action,Science Fiction,Thriller', 'Mad Max, The Road Warrior,Mad Max Beyond Thunderdome.',
'', '', '', '',
'George Miller', 'Mel Gibson,Tina Turner,Roger Ward,Hugh Keays-Byrne,Joanne Samuel,Kjell Nilsson,Bruce Spence,Virginia Hey', 'Australien,USA', '16',
'Ledig'),
('Predator Collection', 'film', 'Action,Science Fiction,Thriller', 'Predator(1987),Predator 2(1990),Predators(2010).',
'', '', '', '',
'John McTiernan,Stephen Hopkins,Nimród Antal', 'Arnold Schwarzenegger,Carl Weathers,Shane Black,Jesse Ventura,Danny Glover,Gary Busey,Maria Conchita Alonso,Bill Paxton,Rubén Blades,Adrien Brody,Topher Grace,Alice Braga,Lawrence Fishburne,Walton Goggins', 'USA', '18',
'Ledig'),
-- journaler
('Chef', 'journal', 'Organisation,Ledarskap,Fackförbund', 'Chef är en månatligt utkommande tidskrift om ledarskap. Chef utges av Ledarna genom det av Ledarna ägda Chefakademin AB. En del av Chefs upplaga distribueras som medlemstidning till Ledarnas medlemmar.',
'Ledarna', '04/2022', '', '',
'', '', 'Sverige', '',
'Referens'),
('Elinstallatören', 'journal', 'Teknik,Installation,El,Elteknik', 'Tidningen Elinstallatören. Elinstallatören skildrar teknik, arbetssätt och nya trender inom elteknikområdet. Ett starkt fokus ligger på svagströms- och automationsbranscherna. Elinstallatören utkommer med 11 nummer per år.',
'Installatörsföretagen', '10/2021', '', '',
'', '', 'Sverige', '',
'Referens'),
('365', 'journal', 'Friluftsliv,Utomhus,Fjällräven', 'Örnsköldsvik : Naturkompaniet,Naturkompaniet 365 - Tillväxtbolaget Sveriges största friluftsmagasin',
'Naturkompaniet', '02/2015', '', '',
'', '', 'Sverige', '',
'Referens'),
('365', 'journal', 'Friluftsliv,Utomhus,Fjällräven', 'Örnsköldsvik : Naturkompaniet,Naturkompaniet 365 - Tillväxtbolaget Sveriges största friluftsmagasin',
'Naturkompaniet', '01/2022', '', '',
'', '', 'Sverige', '',
'Referens');

-- loan and reservation tables

CREATE TABLE `javafxtest`.`loan` (
  `loanid` INT NOT NULL,
  `mediaid` INT NOT NULL,
  `userid` INT NOT NULL,
  `loandate` DATE NOT NULL,
  `returndate` DATE NULL COMMENT 'can be null, is set when loanobject is returned through interface',
  PRIMARY KEY (`loanid`),
  INDEX `mediaid_idx` (`mediaid` ASC) VISIBLE,
  INDEX `userid_idx` (`userid` ASC) VISIBLE,
  CONSTRAINT `mediaLoanID`
    FOREIGN KEY (`mediaid`)
    REFERENCES `javafxtest`.`media` (`mediaid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `userLoanID`
    FOREIGN KEY (`userid`)
    REFERENCES `javafxtest`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
COMMENT = 'table for storing loans';

CREATE TABLE `javafxtest`.`reservation` (
  `reservationid` INT NOT NULL,
  `mediaid` INT NOT NULL,
  `userid` INT NOT NULL,
  `queuenumber` INT NOT NULL COMMENT 'place in reservation queue',
  `reservationdate` DATE NOT NULL COMMENT 'date of reservation',
  PRIMARY KEY (`reservationid`),
  INDEX `mediaid_idx` (`mediaid` ASC) VISIBLE,
  INDEX `userid_idx` (`userid` ASC) VISIBLE,
  CONSTRAINT `mediaReservationID`
    FOREIGN KEY (`mediaid`)
    REFERENCES `javafxtest`.`media` (`mediaid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `userReservationID`
    FOREIGN KEY (`userid`)
    REFERENCES `javafxtest`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
COMMENT = 'table for storing media reservations';

UPDATE `javafxtest`.`media`
SET
`title` = <{title: }>,
`format` = <{format: }>,
`category` = <{category: }>,
`description` = <{description: }>,
`publisher` = <{publisher: }>,
`edition` = <{edition: }>,
`author` = <{author: }>,
`isbn` = <{isbn: }>,
`director` = <{director: }>,
`actor` = <{actor: }>,
`country` = <{country: }>,
`rating` = <{rating: }>,
`available` = <{available: }>
WHERE `mediaid` = <{expr}>;

DELETE FROM `javafxtest`.`media`
WHERE <{where_expression}>;